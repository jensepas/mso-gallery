!function(e){"use strict";e(document).ready((function(){let t;const o=e("#mso-gallery-selected-images"),a=e("#mso-generated-shortcode"),s=o.find(".placeholder");let n=[];function i(){n.length>0?(a.val('[ms_gallery ids="'+n.join(",")+'"]'),s.hide()):(a.val(""),s.show())}e("#mso-select-images-button").on("click",(function(a){a.preventDefault(),t||(t=wp.media({title:msoGalleryAdmin.title,button:{text:msoGalleryAdmin.button},library:{type:"image"},multiple:"add"}),t.on("select",(function(){const a=t.state().get("selection"),s=new Set(n);a.forEach((e=>{s.add(e.id)})),n=Array.from(s),o.find(".mso-thumb-wrapper").remove(),n.forEach((a=>{const s=t?.state().get("selection").get(a)?.toJSON(),n=s?.sizes?.thumbnail?.url||s?.url;if(n){const t=e('<div class="mso-thumb-wrapper">').attr("data-id",a).append(e("<img>").attr("src",n)).append(e('<span class="mso-remove-thumb">&times;</span>'));o.append(t)}})),i()}))),t.open()})),o.on("click",".mso-remove-thumb",(function(){const t=e(this).closest(".mso-thumb-wrapper"),o=t.data("id");n=n.filter((e=>e!==o)),t.remove(),i()})),o.sortable({items:".mso-thumb-wrapper",placeholder:"ui-sortable-placeholder",update:function(t,a){n=o.find(".mso-thumb-wrapper").map((function(){return e(this).data("id")})).get(),i()}}).disableSelection()}))}(jQuery);